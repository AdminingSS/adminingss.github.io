var bestEvents = new Vue({
    el: '#bestEvents',
    delimiters: ["<%","%>"],

    data: {
        bestEvents: []
    },

    mounted: function() {
        // this.loadBest();
    },

    methods: {
        loadBest: function () {
            if (this.bestEvents.length) {
                this.openModal();
            } else {
                this.$http.get('/best_events/').then(function (response) {
                    if (response.body) {
                        this.bestEvents = response.body;
                    }
                }).then(function (response) {
                    this.openModal();
                });
            }
        },

        openModal: function() {
            if ($("#matchevents").length) {
                $('#matchevents').addClass('popup_opened');

                if (!$(".matchevents__slick.slick-initialized").length && $('.matchevents__slick').length) {
                    $(".matchevents__slick").slick({
                        infinite: false,
                        vertical: true,
                        slidesToShow: 2,
                        slidesToScroll: 1,
                        nextArrow: $('.matchevents__next'),
                        prevArrow: $('.matchevents__prev')
                    });
                }
            } else if ($(".modal_callback").length) {        
                $(".modal_callback").addClass("active");

                // Слайдер в модальнике
                if (!$(".modal__slider.slick-initialized").length && $('.modal__slider').length) {
                    $('.modal__slider').slick({
                        prevArrow: '<div class="modal__nav modal__nav-prev"></div>',
                        nextArrow: '<div class="modal__nav modal__nav-next"></div>',
                        centerMode: true,
                        centerPadding: 0
                    });
                }
            }
        },

        formatDate: function(date) {
            if (!date) return '';

            var lng = window.LANG_CODE || 'en';
            return moment.parseZone(date).locale(lng).format('DD MMMM dddd H:mm');
        }
    }
});